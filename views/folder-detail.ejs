<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles/index.css" />
    <title>Home</title>
  </head>
  <body>
    <div class="heading">
      <h1>My Personal Storage</h1>
      <p>User: <%=user.username %></p>
    </div>
    
      <div class="folder-contents">
        <div class="folder-name-div">
          <h2 class="folder-name"><%= selectedFolder.name%></h2>
           <a class="editfolder-link-div" href="/home/<%= selectedFolder.name %>/<%= selectedFolder.id %>/update">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <!-- Pen body -->
                <path
                  d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <!-- Edit line decoration -->
                <path
                  d="M15 5L19 9"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
            </svg>
          </a>
        </div>


        <a class="upload-div" href="/home/<%= selectedFolder.name %>/<%= selectedFolder.id %>/upload-file">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
          </svg>
            <span class="uploadform-link-text">Upload File</span>
        </a>

       

        <% if (files.length) { %>
          <h2>Files:</h2>
          <div class="file-list">
          <% files.forEach((file) => { %>
            <div class="file-card">
                <div class="file-header">
                    <div class="file-info">
                        <span>File: <a href="<%= file.link %>"><%= file.name %></a> </span>
                    </div>
                    
                    
                    <div class="file-side-info">
                      <form action="/download/<%= file.name %>" method="GET">
                        <input type="hidden" name="myFile" value="<%= file.link %>">
                        <button class="download-btn" type="submit">
                          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <!-- Download arrow -->
                            <path
                                d="M12 15L8 11M12 15L16 11M12 15V3M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                fill="none"
                            />
                            </svg>
                        </button>
                      </form>
                      <a class="btn file-details-link" href="/home/<%= selectedFolder.name %>/<%= selectedFolder.id %>/<%= file.name %>/details" >More Info</a>
                      
                    </div>
                </div>
            </div>
          <% }); %>
          </div>
          <% } %>

        <hr>
       
      </div>
      <a class="home-link-div" href="/home">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <!-- House shape -->
              <path 
                d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
             <span class="home-link-text">Home</span>
          </a>

    <form method="post" action="/logout">
      <button type="submit">Logout</button>
    </form>

    
  </body>
</html>
